<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdvancedRouter - Router S√≥lido pero Ligero</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .nav-link {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border-color: #e74c3c;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }

        .nav-link.loading::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background: #f39c12;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .breadcrumbs {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .breadcrumbs a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }

        .breadcrumbs span {
            opacity: 0.7;
            margin: 0 5px;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 20px;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        .page-transition {
            opacity: 1;
            transform: translateX(0);
            transition: all 0.3s ease;
        }

        .page-transition.fade-out {
            opacity: 0;
            transform: translateX(-20px);
        }

        .page-transition.fade-in {
            opacity: 0;
            transform: translateX(20px);
            animation: fadeIn 0.3s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .loading-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #3498db, #e74c3c);
            transition: width 0.3s ease;
            z-index: 1000;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #2ecc71;
        }

        .feature-card h3 {
            color: #2ecc71;
            margin-bottom: 10px;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn.danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .route-info {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid rgba(52, 152, 219, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
        }

        .auth-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(46, 204, 113, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }

        .auth-status.logged-out {
            background: rgba(231, 76, 60, 0.9);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-links {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!-- Loading bar -->
    <div class="loading-bar" id="loadingBar"></div>

    <!-- Auth status -->
    <div class="auth-status" id="authStatus" onclick="toggleAuth()">üîì No autenticado</div>

    <div class="container">
        <div class="header">
            <h1>üöÄ AdvancedRouter</h1>
            <p>Router s√≥lido pero ligero - ~7KB con funcionalidades avanzadas</p>
        </div>

        <!-- Navigation -->
        <div class="nav-section">
            <div class="nav-links">
                <a href="#/" data-route="/">üè† Inicio</a>
                <a href="#/dashboard" data-route="/dashboard">üìä Dashboard</a>
                <a href="#/admin" data-route="/admin">üîê Admin</a>
                <a href="#/blog" data-route="/blog">üìù Blog</a>
                <a href="#/blog/123" data-route="/blog/123">üìÑ Post #123</a>
                <a href="#/profile/juan" data-route="/profile/juan">üë§ Perfil</a>
                <a href="#/settings" data-route="/settings">‚öôÔ∏è Config</a>
                <a href="#/invalid" data-route="/invalid">‚ùå 404</a>
            </div>
            
            <!-- Breadcrumbs din√°micos -->
            <div class="breadcrumbs" id="breadcrumbs"></div>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <div id="content" class="page-transition">
                <!-- Contenido din√°mico -->
            </div>
        </div>

        <!-- Route info -->
        <div class="route-info" id="routeInfo">
            <strong>üîç Router Info:</strong>
            <div id="routeDetails"></div>
        </div>

        <!-- Features showcase -->
        <div class="features-grid">
            <div class="feature-card">
                <h3>üõ°Ô∏è Route Guards</h3>
                <p>Protecci√≥n de rutas con autenticaci√≥n autom√°tica. Redirect a login si no est√° autenticado.</p>
            </div>
            
            <div class="feature-card">
                <h3>üìä Breadcrumbs</h3>
                <p>Navegaci√≥n autom√°tica generada din√°micamente basada en la ruta actual.</p>
            </div>
            
            <div class="feature-card">
                <h3>‚ö° Lazy Loading</h3>
                <p>Carga diferida de contenido pesado solo cuando se necesita.</p>
            </div>
            
            <div class="feature-card">
                <h3>üé® Transiciones</h3>
                <p>Animaciones suaves entre p√°ginas con loading states.</p>
            </div>
            
            <div class="feature-card">
                <h3>üîÑ Redirects</h3>
                <p>Redirecciones autom√°ticas y aliases de rutas.</p>
            </div>
            
            <div class="feature-card">
                <h3>üéØ Meta Tags</h3>
                <p>SEO din√°mico con t√≠tulos y descripciones por ruta.</p>
            </div>
        </div>
    </div>

    <!-- Modal para confirmaciones -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 id="modalTitle">Confirmar acci√≥n</h3>
            <p id="modalMessage">¬øEst√°s seguro?</p>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="confirmAction(true)">S√≠</button>
                <button class="btn danger" onclick="confirmAction(false)">No</button>
            </div>
        </div>
    </div>

    <script>
        // ===================================
        // ADVANCED ROUTER - VERSI√ìN S√ìLIDA
        // ===================================
        
        class AdvancedRouter {
            constructor(options = {}) {
                this.routes = new Map();
                this.middlewares = [];
                this.guards = new Map();
                this.redirects = new Map();
                this.aliases = new Map();
                this.notFoundHandler = null;
                this.errorHandler = null;
                this.beforeEach = null;
                this.afterEach = null;
                
                // Estado del router
                this.currentPath = '';
                this.params = {};
                this.query = {};
                this.meta = {};
                this.history = [];
                this.isNavigating = false;
                
                // Configuraci√≥n
                this.config = {
                    mode: 'auto',
                    hashPrefix: '#',
                    debug: false,
                    transitions: true,
                    loadingBar: true,
                    breadcrumbs: true,
                    maxHistory: 50,
                    scrollBehavior: 'top', // 'top', 'smooth', 'restore'
                    preloadDelay: 100,
                    ...options
                };
                
                // Auto-detectar modo
                if (this.config.mode === 'auto') {
                    this.config.mode = location.protocol === 'file:' ? 'hash' : 'history';
                }
                
                this.init();
            }
            
            // ===============================
            // CORE ROUTING FUNCTIONALITY
            // ===============================
            
            get(path, handler, options = {}) {
                this.routes.set(path, {
                    handler,
                    meta: options.meta || {},
                    guard: options.guard,
                    lazy: options.lazy || false,
                    preload: options.preload || false
                });
                return this;
            }
            
            redirect(from, to) {
                this.redirects.set(from, to);
                return this;
            }
            
            alias(path, alias) {
                this.aliases.set(alias, path);
                return this;
            }
            
            guard(name, guardFunction) {
                this.guards.set(name, guardFunction);
                return this;
            }
            
            use(middleware) {
                this.middlewares.push(middleware);
                return this;
            }
            
            notFound(handler) {
                this.notFoundHandler = handler;
                return this;
            }
            
            onError(handler) {
                this.errorHandler = handler;
                return this;
            }
            
            // ===============================
            // NAVIGATION FUNCTIONALITY
            // ===============================
            
            async navigate(path, options = {}) {
                if (this.isNavigating) return;
                
                try {
                    this.isNavigating = true;
                    
                    // Mostrar loading
                    if (this.config.loadingBar) {
                        this.showLoading();
                    }
                    
                    // Verificar redirects
                    if (this.redirects.has(path)) {
                        path = this.redirects.get(path);
                    }
                    
                    // Verificar aliases
                    if (this.aliases.has(path)) {
                        path = this.aliases.get(path);
                    }
                    
                    // Ejecutar beforeEach
                    if (this.beforeEach) {
                        const shouldContinue = await this.beforeEach(path, this.currentPath);
                        if (shouldContinue === false) {
                            this.isNavigating = false;
                            this.hideLoading();
                            return;
                        }
                    }
                    
                    // Actualizar URL
                    if (this.config.mode === 'hash') {
                        if (options.replace) {
                            location.replace(this.config.hashPrefix + path);
                        } else {
                            location.hash = path;
                        }
                    } else {
                        if (options.replace) {
                            history.replaceState({}, '', path);
                        } else {
                            history.pushState({}, '', path);
                        }
                    }
                    
                    // Procesar ruta
                    await this.handleRoute(path, options);
                    
                } catch (error) {
                    console.error('Navigation error:', error);
                    if (this.errorHandler) {
                        this.errorHandler(error);
                    }
                } finally {
                    this.isNavigating = false;
                    this.hideLoading();
                }
            }
            
            back() {
                history.back();
            }
            
            forward() {
                history.forward();
            }
            
            go(delta) {
                history.go(delta);
            }
            
            // ===============================
            // ROUTE HANDLING
            // ===============================
            
            async handleRoute(path = null, options = {}) {
                if (!path) {
                    path = this.getCurrentPath();
                }
                
                const oldPath = this.currentPath;
                this.currentPath = path;
                this.query = this.parseQuery(path);
                
                // Agregar al historial
                this.addToHistory(path);
                
                // Crear contexto
                const context = {
                    path: path.split('?')[0],
                    fullPath: path,
                    query: this.query,
                    params: {},
                    meta: {},
                    router: this,
                    from: oldPath
                };
                
                // Ejecutar middlewares
                await this.runMiddlewares(context);
                
                // Buscar ruta coincidente
                for (const [pattern, routeConfig] of this.routes) {
                    const params = this.parseRoute(pattern, context.path);
                    if (params !== null) {
                        context.params = params;
                        context.meta = routeConfig.meta;
                        this.params = params;
                        this.meta = routeConfig.meta;
                        
                        // Verificar guard
                        if (routeConfig.guard) {
                            const guardFunction = this.guards.get(routeConfig.guard);
                            if (guardFunction) {
                                const canActivate = await guardFunction(context);
                                if (!canActivate) {
                                    if (this.config.debug) {
                                        console.log(`Route guard "${routeConfig.guard}" blocked navigation to ${path}`);
                                    }
                                    return;
                                }
                            }
                        }
                        
                        // Transici√≥n de salida
                        if (this.config.transitions) {
                            await this.transitionOut();
                        }
                        
                        // Cargar contenido
                        if (routeConfig.lazy) {
                            await this.loadLazyContent(routeConfig.handler, context);
                        } else {
                            await routeConfig.handler(context);
                        }
                        
                        // Actualizar meta tags
                        this.updateMetaTags(context.meta);
                        
                        // Actualizar breadcrumbs
                        if (this.config.breadcrumbs) {
                            this.updateBreadcrumbs(context.path);
                        }
                        
                        // Transici√≥n de entrada
                        if (this.config.transitions) {
                            await this.transitionIn();
                        }
                        
                        // Scroll behavior
                        this.handleScrollBehavior();
                        
                        // Actualizar info de debug
                        this.updateRouteInfo(context);
                        
                        // Actualizar links activos
                        this.updateActiveLinks(context.path);
                        
                        // Ejecutar afterEach
                        if (this.afterEach) {
                            this.afterEach(context.path, oldPath);
                        }
                        
                        if (this.config.debug) {
                            console.log(`AdvancedRouter: ${pattern} matched`, context);
                        }
                        
                        return;
                    }
                }
                
                // Ruta no encontrada
                context.meta = { title: 'P√°gina no encontrada' };
                this.updateMetaTags(context.meta);
                
                if (this.notFoundHandler) {
                    await this.notFoundHandler(context);
                } else {
                    document.getElementById('content').innerHTML = `
                        <h1>‚ùå 404 - P√°gina no encontrada</h1>
                        <p>La ruta <code>${path}</code> no existe.</p>
                    `;
                }
                
                this.updateRouteInfo(context);
            }
            
            // ===============================
            // UTILITY FUNCTIONS
            // ===============================
            
            getCurrentPath() {
                if (this.config.mode === 'hash') {
                    return location.hash.slice(1) || '/';
                }
                return location.pathname;
            }
            
            parseRoute(pattern, path) {
                const patternParts = pattern.split('/').filter(Boolean);
                const pathParts = path.split('/').filter(Boolean);
                
                if (patternParts.length !== pathParts.length) return null;
                
                const params = {};
                for (let i = 0; i < patternParts.length; i++) {
                    const patternPart = patternParts[i];
                    const pathPart = pathParts[i];
                    
                    if (patternPart.startsWith(':')) {
                        params[patternPart.slice(1)] = decodeURIComponent(pathPart);
                    } else if (patternPart !== pathPart) {
                        return null;
                    }
                }
                return params;
            }
            
            parseQuery(path) {
                const queryIndex = path.indexOf('?');
                if (queryIndex === -1) return {};
                
                const query = {};
                const queryString = path.slice(queryIndex + 1);
                queryString.split('&').forEach(pair => {
                    const [key, value] = pair.split('=');
                    if (key) {
                        query[decodeURIComponent(key)] = decodeURIComponent(value || '');
                    }
                });
                return query;
            }
            
            async runMiddlewares(context) {
                for (const middleware of this.middlewares) {
                    await new Promise(resolve => {
                        middleware(context, resolve);
                    });
                }
            }
            
            // ===============================
            // ADVANCED FEATURES
            // ===============================
            
            async loadLazyContent(lazyHandler, context) {
                // Mostrar loading espec√≠fico
                document.getElementById('content').innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <div style="font-size: 24px; margin-bottom: 15px;">‚è≥</div>
                        <div>Cargando contenido...</div>
                    </div>
                `;
                
                // Simular carga async
                await new Promise(resolve => setTimeout(resolve, 500));
                
                if (typeof lazyHandler === 'function') {
                    return lazyHandler(context);
                } else if (typeof lazyHandler === 'string') {
                    // URL para cargar contenido din√°mico
                    try {
                        const response = await fetch(lazyHandler);
                        const content = await response.text();
                        document.getElementById('content').innerHTML = content;
                    } catch (error) {
                        document.getElementById('content').innerHTML = '‚ùå Error cargando contenido';
                    }
                }
            }
            
            updateMetaTags(meta) {
                if (meta.title) {
                    document.title = meta.title;
                }
                
                // Actualizar meta description
                if (meta.description) {
                    let metaDesc = document.querySelector('meta[name="description"]');
                    if (!metaDesc) {
                        metaDesc = document.createElement('meta');
                        metaDesc.name = 'description';
                        document.head.appendChild(metaDesc);
                    }
                    metaDesc.content = meta.description;
                }
            }
            
            updateBreadcrumbs(path) {
                const breadcrumbsEl = document.getElementById('breadcrumbs');
                if (!breadcrumbsEl) return;
                
                const parts = path.split('/').filter(Boolean);
                let breadcrumbs = '<a href="#/" data-route="/">üè† Inicio</a>';
                let currentPath = '';
                
                parts.forEach((part, index) => {
                    currentPath += '/' + part;
                    if (index === parts.length - 1) {
                        breadcrumbs += ` <span>‚Ä∫</span> <span>${part}</span>`;
                    } else {
                        breadcrumbs += ` <span>‚Ä∫</span> <a href="#${currentPath}" data-route="${currentPath}">${part}</a>`;
                    }
                });
                
                breadcrumbsEl.innerHTML = breadcrumbs;
            }
            
            addToHistory(path) {
                this.history.push({
                    path,
                    timestamp: Date.now(),
                    params: { ...this.params },
                    query: { ...this.query }
                });
                
                // Limitar historial
                if (this.history.length > this.config.maxHistory) {
                    this.history.shift();
                }
            }
            
            getHistory() {
                return [...this.history];
            }
            
            // ===============================
            // UI/UX FEATURES
            // ===============================
            
            async transitionOut() {
                const content = document.getElementById('content');
                content.classList.add('fade-out');
                await new Promise(resolve => setTimeout(resolve, 150));
            }
            
            async transitionIn() {
                const content = document.getElementById('content');
                content.classList.remove('fade-out');
                content.classList.add('fade-in');
                await new Promise(resolve => setTimeout(resolve, 300));
                content.classList.remove('fade-in');
            }
            
            showLoading() {
                const loadingBar = document.getElementById('loadingBar');
                if (loadingBar) {
                    loadingBar.style.width = '70%';
                }
            }
            
            hideLoading() {
                const loadingBar = document.getElementById('loadingBar');
                if (loadingBar) {
                    loadingBar.style.width = '100%';
                    setTimeout(() => {
                        loadingBar.style.width = '0%';
                    }, 200);
                }
            }
            
            handleScrollBehavior() {
                switch (this.config.scrollBehavior) {
                    case 'top':
                        window.scrollTo(0, 0);
                        break;
                    case 'smooth':
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        break;
                    case 'restore':
                        // Implementar restore en futuras versiones
                        break;
                }
            }
            
            updateRouteInfo(context) {
                const routeDetails = document.getElementById('routeDetails');
                if (routeDetails) {
                    routeDetails.innerHTML = `
                        <div><strong>Ruta:</strong> ${context.path}</div>
                        <div><strong>Par√°metros:</strong> ${JSON.stringify(context.params)}</div>
                        <div><strong>Query:</strong> ${JSON.stringify(context.query)}</div>
                        <div><strong>Meta:</strong> ${JSON.stringify(context.meta)}</div>
                        <div><strong>Modo:</strong> ${this.config.mode}</div>
                    `;
                }
            }
            
            updateActiveLinks(currentPath) {
                document.querySelectorAll('[data-route]').forEach(link => {
                    const route = link.getAttribute('data-route');
                    if (route === currentPath) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }
            
            // ===============================
            // INITIALIZATION
            // ===============================
            
            init() {
                // Event listeners
                if (this.config.mode === 'hash') {
                    window.addEventListener('hashchange', () => this.handleRoute());
                } else {
                    window.addEventListener('popstate', () => this.handleRoute());
                }
                
                // Auto-bind links
                this.bindLinks();
                
                // Procesar ruta inicial
                this.handleRoute();
                
                if (this.config.debug) {
                    console.log(`AdvancedRouter initialized in ${this.config.mode} mode`);
                }
            }
            
            bindLinks() {
                document.addEventListener('click', (e) => {
                    const link = e.target.closest('[data-route]');
                    if (link) {
                        e.preventDefault();
                        const route = link.getAttribute('data-route');
                        
                        // Mostrar loading en el link
                        link.classList.add('loading');
                        setTimeout(() => link.classList.remove('loading'), 500);
                        
                        this.navigate(route);
                    }
                });
            }
        }

        // ===================================
        // DEMO DE FUNCIONALIDADES AVANZADAS
        // ===================================
        
        // Estado de autenticaci√≥n simulado
        let isAuthenticated = false;
        
        // Crear router avanzado
        const router = new AdvancedRouter({ 
            debug: true, 
            transitions: true,
            breadcrumbs: true 
        });

        // Guards de autenticaci√≥n
        router.guard('auth', async (context) => {
            if (!isAuthenticated) {
                await showModal('üîê Acceso Denegado', 'Necesitas estar autenticado para acceder a esta p√°gina.');
                router.navigate('/');
                return false;
            }
            return true;
        });

        // Middleware global de logging
        router.use((context, next) => {
            console.log(`üîç Navegando a: ${context.path}`, context);
            next();
        });

        // Redirects y aliases
        router.redirect('/home', '/');
        router.alias('/', '/inicio');

        // Hooks globales
        router.beforeEach = async (to, from) => {
            console.log(`üöÄ Navegando de ${from} a ${to}`);
            return true; // Permitir navegaci√≥n
        };

        router.afterEach = (to, from) => {
            console.log(`‚úÖ Navegaci√≥n completada: ${to}`);
        };

        // Definir rutas con funcionalidades avanzadas
        router
            .get('/', (ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>üè† P√°gina Principal</h1>
                    <p>¬°Bienvenido a AdvancedRouter!</p>
                    <div class="features-grid" style="margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                            <h3>üöÄ Router Avanzado</h3>
                            <p>Con guards, lazy loading, transiciones y m√°s.</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                            <h3>üìä Solo ~7KB</h3>
                            <p>Funcionalidades s√≥lidas sin ser pesado.</p>
                        </div>
                    </div>
                `;
            }, { 
                meta: { 
                    title: 'Inicio - AdvancedRouter',
                    description: 'Router avanzado pero ligero para proyectos s√≥lidos' 
                } 
            })
            
            .get('/dashboard', (ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>üìä Dashboard</h1>
                    <p>Panel de control con datos importantes.</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                        <div style="background: rgba(46,204,113,0.2); padding: 20px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold;">1,234</div>
                            <div>Usuarios</div>
                        </div>
                        <div style="background: rgba(52,152,219,0.2); padding: 20px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold;">567</div>
                            <div>Ventas</div>
                        </div>
                        <div style="background: rgba(231,76,60,0.2); padding: 20px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold;">89</div>
                            <div>Pendientes</div>
                        </div>
                    </div>
                `;
            }, { 
                meta: { 
                    title: 'Dashboard - AdvancedRouter' 
                } 
            })
            
            .get('/admin', (ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>üîê Administraci√≥n</h1>
                    <p>Panel de administraci√≥n protegido.</p>
                    <p>Solo usuarios autenticados pueden ver esta p√°gina.</p>
                    <div style="background: rgba(46,204,113,0.2); padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h3>‚úÖ Acceso Autorizado</h3>
                        <p>Has pasado el guard de autenticaci√≥n correctamente.</p>
                    </div>
                `;
            }, { 
                guard: 'auth',
                meta: { 
                    title: 'Admin - AdvancedRouter' 
                } 
            })
            
            .get('/blog', (ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>üìù Blog</h1>
                    <p>Lista de posts del blog.</p>
                    <div style="margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                            <h3><a href="#/blog/123" data-route="/blog/123" style="color: #3498db;">Post #123: Router Avanzado</a></h3>
                            <p>C√≥mo crear un router s√≥lido para tus proyectos...</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                            <h3><a href="#/blog/456" data-route="/blog/456" style="color: #3498db;">Post #456: Lazy Loading</a></h3>
                            <p>Optimizaci√≥n de carga con contenido diferido...</p>
                        </div>
                    </div>
                `;
            }, { 
                meta: { 
                    title: 'Blog - AdvancedRouter' 
                } 
            })
            
            .get('/blog/:id', (ctx) => {
                const { id } = ctx.params;
                const posts = {
                    '123': { title: 'Router Avanzado', content: 'Construir un router s√≥lido te permite crear aplicaciones web profesionales...' },
                    '456': { title: 'Lazy Loading', content: 'El lazy loading mejora el rendimiento cargando contenido solo cuando se necesita...' }
                };
                
                const post = posts[id] || { title: 'Post no encontrado', content: 'Este post no existe.' };
                
                document.getElementById('content').innerHTML = `
                    <h1>üìÑ ${post.title}</h1>
                    <p><strong>Post ID:</strong> ${id}</p>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <p>${post.content}</p>
                    </div>
                    <div style="margin-top: 20px;">
                        <button onclick="router.navigate('/blog')" class="btn">‚Üê Volver al Blog</button>
                    </div>
                `;
            }, { 
                lazy: true,
                meta: { 
                    title: 'Post - AdvancedRouter' 
                } 
            })
            
            .get('/profile/:name', (ctx) => {
                const { name } = ctx.params;
                document.getElementById('content').innerHTML = `
                    <h1>üë§ Perfil de ${name}</h1>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h3>Informaci√≥n del usuario</h3>
                        <p><strong>Nombre:</strong> ${name}</p>
                        <p><strong>Desde:</strong> ${ctx.query.desde || 'No especificado'}</p>
                        <p><strong>Tipo:</strong> ${ctx.query.tipo || 'Usuario regular'}</p>
                    </div>
                `;
            }, { 
                meta: { 
                    title: `Perfil - AdvancedRouter` 
                } 
            })
            
            .get('/settings', (ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>‚öôÔ∏è Configuraci√≥n</h1>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h3>Configuraci√≥n del Router</h3>
                        <p><strong>Modo:</strong> ${router.config.mode}</p>
                        <p><strong>Transiciones:</strong> ${router.config.transitions ? 'Activadas' : 'Desactivadas'}</p>
                        <p><strong>Breadcrumbs:</strong> ${router.config.breadcrumbs ? 'Activados' : 'Desactivados'}</p>
                        <p><strong>Debug:</strong> ${router.config.debug ? 'Activado' : 'Desactivado'}</p>
                        
                        <h3 style="margin-top: 20px;">Historial de Navegaci√≥n</h3>
                        <div style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                            ${router.getHistory().slice(-10).map(h => 
                                `<div style="margin-bottom: 5px; font-size: 12px;">${h.path} - ${new Date(h.timestamp).toLocaleTimeString()}</div>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }, { 
                meta: { 
                    title: 'Configuraci√≥n - AdvancedRouter' 
                } 
            })
            
            .notFound((ctx) => {
                document.getElementById('content').innerHTML = `
                    <h1>‚ùå 404 - P√°gina no encontrada</h1>
                    <p>La ruta <code>${ctx.path}</code> no existe.</p>
                    <div style="margin-top: 20px;">
                        <button onclick="router.navigate('/')" class="btn">üè† Ir al Inicio</button>
                        <button onclick="router.back()" class="btn">‚Üê Volver</button>
                    </div>
                `;
            });

        // ===================================
        // FUNCIONALIDADES AUXILIARES
        // ===================================
        
        function toggleAuth() {
            isAuthenticated = !isAuthenticated;
            const authStatus = document.getElementById('authStatus');
            if (isAuthenticated) {
                authStatus.textContent = 'üîì Autenticado';
                authStatus.classList.remove('logged-out');
            } else {
                authStatus.textContent = 'üîê No autenticado';
                authStatus.classList.add('logged-out');
            }
        }
        
        function showModal(title, message) {
            return new Promise((resolve) => {
                document.getElementById('modalTitle').textContent = title;
                document.getElementById('modalMessage').textContent = message;
                document.getElementById('confirmModal').classList.add('show');
                
                window.currentModalResolve = resolve;
            });
        }
        
        function confirmAction(confirmed) {
            document.getElementById('confirmModal').classList.remove('show');
            if (window.currentModalResolve) {
                window.currentModalResolve(confirmed);
            }
        }
    </script>
</body>
</html>